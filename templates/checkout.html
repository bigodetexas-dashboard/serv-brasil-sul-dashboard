<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - BigodeTexas</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <link rel="stylesheet" href="/static/css/shop.css">
    <link rel="stylesheet" href="/static/css/checkout.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>

<body>
    <div class="checkout-container">
        <!-- Header -->
        <header class="checkout-header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <i class="fas fa-skull-crossbones"></i>
                        <h1>Finalizar Compra <span
                                style="font-size: 0.5em; background: #ff4757; padding: 2px 8px; border-radius: 4px; vertical-align: middle;">v2.0
                                LOCAL</span></h1>
                    </div>
                    <div class="balance">
                        <i class="fas fa-coins"></i>
                        <span id="user-balance">0</span> DZ Coins
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="checkout-main">
            <div class="container">
                <div class="checkout-grid">
                    <!-- Order Summary -->
                    <div class="order-summary">
                        <h2><i class="fas fa-shopping-bag"></i> Resumo do Pedido</h2>
                        <div class="order-items" id="order-items">
                            <!-- Items will be loaded here -->
                        </div>
                        <div class="order-total">
                            <div class="total-row">
                                <span>Subtotal:</span>
                                <span id="subtotal">0 DZ Coins</span>
                            </div>
                            <div class="total-row total-final">
                                <span>Total:</span>
                                <span id="total">0 DZ Coins</span>
                            </div>
                        </div>
                        <div class="balance-info">
                            <div class="balance-row">
                                <span>Saldo Atual:</span>
                                <span id="current-balance">0 DZ Coins</span>
                            </div>
                            <div class="balance-row">
                                <span>Saldo Após Compra:</span>
                                <span id="balance-after" class="balance-after">0 DZ Coins</span>
                            </div>
                        </div>
                    </div>

                    <!-- Map Selection -->
                    <div class="map-section">
                        <h2><i class="fas fa-map-marked-alt"></i> Selecione o Local de Entrega</h2>
                        <p class="map-description">
                            <i class="fas fa-info-circle"></i>
                            Clique no mapa para escolher onde deseja receber seus itens.
                            A entrega será feita em <strong>5 minutos</strong>.
                        </p>

                        <!-- Interactive Leaflet Map -->
                        <div id="map" class="leaflet-map"></div>

                        <!-- Coordinates Display -->
                        <div class="coordinates-display">
                            <div class="coord-item">
                                <label><i class="fas fa-arrows-alt-h"></i> Coordenada X:</label>
                                <input type="number" id="coord-x" min="0" max="15360" placeholder="Clique no mapa"
                                    readonly>
                            </div>
                            <div class="coord-item">
                                <label><i class="fas fa-arrows-alt-v"></i> Coordenada Z:</label>
                                <input type="number" id="coord-z" min="0" max="15360" placeholder="Clique no mapa"
                                    readonly>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="checkout-actions">
                            <button class="btn-confirm-order" id="btn-confirm-order" disabled>
                                <i class="fas fa-check-circle"></i>
                                Confirmar Pedido
                            </button>
                            <button class="btn-back" onclick="window.location.href='/shop'">
                                <i class="fas fa-arrow-left"></i>
                                Voltar para a Loja
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/js/checkout.js"></script>
</body>

</html>